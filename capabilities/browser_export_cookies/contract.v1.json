{
  "name": "browser.export_cookies",
  "description": "Export browser cookies for a domain to a Netscape cookies.txt file using yt-dlp cookie extraction. Useful for login-gated downloads.",
  "version": "v1",
  "input_schema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "browser": {
        "type": "string",
        "description": "Browser name (e.g., safari, chrome, firefox).",
        "default": "safari"
      },
      "domain": {
        "type": "string",
        "description": "Domain to export cookies for (e.g. brighttalk.com)."
      },
      "output": {
        "type": "string",
        "description": "Output path for the cookies.txt file."
      },
      "profile": {
        "type": ["string", "null"],
        "description": "Optional browser profile name or path.",
        "default": null
      },
      "container": {
        "type": ["string", "null"],
        "description": "Firefox container name (ignored by non-Firefox browsers).",
        "default": null
      },
      "keyring": {
        "type": ["string", "null"],
        "description": "Chromium keyring (primarily for Linux). Usually not needed on macOS.",
        "default": null
      },
      "include_subdomains": {
        "type": "boolean",
        "description": "Include cookies for subdomains of the target domain.",
        "default": true
      },
      "quiet": {
        "type": "boolean",
        "description": "Reduce stderr logging.",
        "default": false
      }
    },
    "required": ["domain", "output"]
  },
  "output_schema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "output_path": {
        "type": "string",
        "description": "Absolute path where cookies.txt was written."
      },
      "cookie_count": {
        "type": "integer",
        "description": "Number of cookies exported."
      }
    },
    "required": ["output_path", "cookie_count"]
  },
  "errors": [
    {
      "code": "dependency_error",
      "description": "yt-dlp is not installed."
    },
    {
      "code": "extraction_error",
      "description": "Failed to extract cookies from the browser (permissions, profile not found, etc.)."
    },
    {
      "code": "validation_error",
      "description": "Input did not match schema."
    }
  ],
  "side_effects": "Reads the browser cookie store and writes a Netscape-format cookies.txt file to the specified output path. Treat the output file like a credential.",
  "version_notes": "v1 initial implementation. Must run on the same machine as the browser profile."
}
