{
  "name": "infra.spawn_instance",
  "description": "Create a named instance from a Docker Compose template. Sets project name to {template}-{name} and runs docker compose up -d.",
  "version": "v1",
  "annotations": {
    "title": "Spawn Template Instance",
    "destructiveHint": true
  },
  "input_schema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "template": {
        "type": "string",
        "description": "Repo name containing docker-compose.template.yml."
      },
      "name": {
        "type": "string",
        "description": "Instance name. Combined with template for project name."
      },
      "env": {
        "type": ["object", "null"],
        "description": "Environment variables for Compose substitution.",
        "additionalProperties": { "type": "string" },
        "default": null
      },
      "base_dir": {
        "type": "string",
        "description": "Base directory on the host.",
        "default": "/opt"
      }
    },
    "required": ["template", "name"]
  },
  "output_schema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "template": { "type": "string" },
      "name": { "type": "string" },
      "project_name": { "type": "string" },
      "action": { "type": "string" },
      "exit_code": { "type": "integer" },
      "hint": { "type": "string" }
    },
    "required": ["template", "name", "project_name", "action"]
  },
  "errors": [
    { "code": "dependency_error", "description": "Required binary not found in PATH." },
    { "code": "compose_error", "description": "docker compose up failed." }
  ],
  "side_effects": "Creates Docker containers from a Compose template locally.",
  "version_notes": "v1 initial implementation."
}
